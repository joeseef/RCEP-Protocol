/* RL4-ish "dark premium" design system (popup-local, no external deps) */
:root {
  /* Backgrounds */
  --bg-primary: #05050a;
  --bg-secondary: #090613;
  --bg-surface: rgba(255, 255, 255, 0.03);
  --bg-surface-hover: rgba(255, 255, 255, 0.06);

  /* Brand */
  --brand-pink: #F4E9E8;
  --brand-ink: #121012;
  --brand-rose: rgba(244, 233, 232, 0.22);

  /* Borders */
  --border-default: rgba(255, 255, 255, 0.08);
  --border-hover: rgba(255, 255, 255, 0.15);
  --border-active: rgba(255, 255, 255, 0.2);

  /* Text */
  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-muted: rgba(255, 255, 255, 0.4);
  --text-disabled: rgba(255, 255, 255, 0.25);

  /* Accents (logo-aligned: soft rose on dark) */
  --cta-gradient: linear-gradient(135deg, #F4E9E8, #E7CDCB, #D9B1AE);
  --cta-shadow: 0 18px 45px rgba(244, 233, 232, 0.16);
  --focus-ring: rgba(244, 233, 232, 0.22);

  /* Status */
  --success-gradient: linear-gradient(135deg, #10b981, #34d399);
  --success-border: rgba(52, 211, 153, 0.5);
  --error-bg: rgba(244, 63, 94, 0.1);
  --error-border: rgba(244, 114, 182, 0.5);
  --info-bg: rgba(132, 165, 255, 0.08);
  --info-border: rgba(132, 165, 255, 0.25);

  /* Radius */
  --radius-frame: 24px;
  --radius-card: 18px;
  --radius-button: 14px;
  --radius-pill: 9999px;

  /* Spacing (8pt grid) */
  --s-1: 4px;
  --s-2: 8px;
  --s-3: 12px;
  --s-4: 16px;
  --s-5: 20px;
  --s-6: 24px;

  /* Typography */
  --font-sans: 'Geist', 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', monospace;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  width: 100%;
  max-width: 460px;
  min-width: 360px;
  margin: 0;
  padding: var(--s-4);
  font-family: var(--font-sans);
  background:
    radial-gradient(900px 540px at -18% -12%, rgba(244, 233, 232, 0.22), transparent 60%),
    radial-gradient(780px 540px at 120% 20%, rgba(244, 233, 232, 0.14), transparent 55%),
    var(--bg-primary);
  color: var(--text-primary);
}

.container {
  display: flex;
  flex-direction: column;
  gap: var(--s-3);
  border-radius: var(--radius-frame);
  border: 1px solid rgba(244, 233, 232, 0.14);
  background: linear-gradient(180deg, rgba(9, 6, 19, 0.96), rgba(9, 6, 19, 0.82));
  box-shadow: 0 25px 80px rgba(0, 0, 0, 0.65);
  overflow: hidden;
  padding: var(--s-4);
  position: relative;
}

/* Busy spinner (top-right) */
.busy-spinner {
  position: absolute;
  top: var(--s-3);
  right: var(--s-3);
  width: 18px;
  height: 18px;
  border-radius: 50%;
  border: 2px solid rgba(244, 233, 232, 0.22);
  border-top-color: rgba(244, 233, 232, 0.95);
  box-shadow: 0 10px 22px rgba(244, 233, 232, 0.10);
  animation: rl4spin 0.9s linear infinite;
}

@keyframes rl4spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

header {
  text-align: left;
  display: flex;
  flex-direction: column;
  gap: var(--s-2);
}

.header-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
}

.btn-reload {
  opacity: 0.9;
}

.btn-toggle {
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.10);
  background: rgba(255, 255, 255, 0.06);
  transition: transform 120ms ease, background 160ms ease, border-color 160ms ease;
}

.btn-toggle:hover {
  background: rgba(255, 255, 255, 0.10);
  border-color: rgba(255, 255, 255, 0.16);
  transform: translateY(-1px);
}

.options {
  margin-top: 10px;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.03);
  padding: 10px 10px 8px;
}

.options-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.options-title {
  font-weight: 600;
  color: rgba(255, 255, 255, 0.86);
  font-size: 13px;
}

.options-body {
  margin-top: 8px;
}

.header-brand {
  display: flex;
  align-items: center;
  gap: var(--s-3);
}

.logo-wrap {
  width: 46px;
  height: 46px;
  flex-shrink: 0;
  border-radius: 14px;
  /* Brand background (requested) */
  background: var(--brand-pink);
  border: 1px solid rgba(0, 0, 0, 0.10);
  box-shadow:
    0 14px 30px rgba(0, 0, 0, 0.45),
    0 0 0 1px rgba(0, 0, 0, 0.10) inset;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.logo-img {
  width: 32px;
  height: 32px;
  display: block;
  object-fit: contain;
  /* If the source PNG has a light background, this makes it visually disappear on #F4E9E8 */
  mix-blend-mode: multiply;
  image-rendering: auto;
}

.header-text {
  display: flex;
  flex-direction: column;
  gap: var(--s-1);
  flex: 1;
  min-width: 0;
}

header h1 {
  font-size: 18px;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: rgba(255, 255, 255, 0.96);
  margin: 0;
  line-height: 1.2;
}

.subtitle {
  font-size: 12px;
  color: var(--text-secondary);
  line-height: 1.35;
}

.subtitle b,
.subtitle strong {
  color: rgba(255, 255, 255, 0.86);
}

.field {
  display: flex;
  flex-direction: column;
  gap: var(--s-2);
 }

.field-label {
  font-size: 12px;
  color: var(--text-secondary);
  font-weight: 600;
 }

.input {
  width: 100%;
  border: 1px solid var(--border-default);
  border-radius: var(--radius-button);
  padding: 10px var(--s-3);
  font-size: 13px;
  background: rgba(255, 255, 255, 0.03);
  color: var(--text-primary);
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
 }

.input::placeholder {
  color: var(--text-muted);
}

.input:focus {
  border-color: var(--border-active);
  background: rgba(255, 255, 255, 0.05);
  box-shadow: 0 0 0 3px var(--focus-ring);
 }

.checkbox {
  display: flex;
  gap: var(--s-2);
  align-items: center;
  font-size: 12px;
  color: var(--text-secondary);
  user-select: none;
 }

.checkbox span {
  line-height: 1.25;
  flex: 1;
}

.checkbox span strong {
  display: inline-block;
  margin-right: 2px;
}

.checkbox input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: var(--brand-pink);
}

.checkbox span strong {
  color: rgba(255, 255, 255, 0.92);
  font-weight: 700;
}

.checkbox.is-disabled {
  opacity: 0.55;
}

main {
  display: flex;
  flex-direction: column;
  gap: var(--s-3);
}

.btn-primary {
  background: var(--cta-gradient);
  color: var(--brand-ink);
  border: 1px solid rgba(0, 0, 0, 0.08);
  padding: 12px var(--s-4);
  border-radius: var(--radius-button);
  font-size: 13px;
  font-weight: 700;
  letter-spacing: 0.2px;
  cursor: pointer;
  width: 100%;
  transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;
  box-shadow: var(--cta-shadow);
}

.btn-primary:hover {
  filter: brightness(1.05);
  transform: translateY(-1px);
}

.btn-primary:active {
  transform: translateY(0px);
  filter: brightness(0.98);
}

.btn-primary:disabled {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text-disabled);
  box-shadow: none;
  cursor: not-allowed;
}

.status {
  margin-top: 0;
  padding: var(--s-3);
  border-radius: var(--radius-card);
  font-size: 13px;
  line-height: 1.5;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--border-default);
  color: var(--text-secondary);
}

.status.success {
  background: rgba(16, 185, 129, 0.1);
  border: 1px solid var(--success-border);
  color: rgba(255, 255, 255, 0.88);
}

.status.error {
  background: var(--error-bg);
  border: 1px solid var(--error-border);
  color: rgba(255, 255, 255, 0.9);
}

.status.loading {
  background: var(--info-bg);
  border: 1px solid var(--info-border);
  color: rgba(255, 255, 255, 0.88);
}

.hidden {
  display: none;
}

/* --- Guided UX (state machine glow) --- */
@keyframes rl4GuidePulse {
  0% { box-shadow: 0 0 0 0 rgba(244, 233, 232, 0.18), 0 18px 45px rgba(244, 233, 232, 0.10); }
  55% { box-shadow: 0 0 0 6px rgba(244, 233, 232, 0.08), 0 22px 55px rgba(244, 233, 232, 0.16); }
  100% { box-shadow: 0 0 0 0 rgba(244, 233, 232, 0.18), 0 18px 45px rgba(244, 233, 232, 0.10); }
}

.rl4-guide-cta {
  animation: rl4GuidePulse 1.8s ease-in-out infinite;
  transform-origin: center;
}

.rl4-guide-container {
  animation: rl4GuidePulse 1.8s ease-in-out infinite;
  border-color: rgba(244, 233, 232, 0.22) !important;
}

.rl4-guide-input {
  animation: rl4GuidePulse 1.8s ease-in-out infinite;
  border-color: rgba(244, 233, 232, 0.24) !important;
  box-shadow: 0 0 0 1px rgba(244, 233, 232, 0.10), 0 20px 55px rgba(244, 233, 232, 0.10) !important;
}

.metadata {
  display: flex;
  flex-direction: column;
  gap: var(--s-3);
  padding: var(--s-4);
  background: rgba(255, 255, 255, 0.03);
  border-radius: var(--radius-card);
  border: 1px solid rgba(244, 233, 232, 0.12);
  backdrop-filter: blur(10px);
}

.stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 13px;
}

.stat .label {
  color: var(--text-muted);
  font-weight: 500;
}

.stat span:not(.label) {
  color: var(--text-primary);
  font-weight: 600;
  font-family: var(--font-mono);
}

.checksum-short {
  font-size: 11px;
  word-break: break-all;
  text-align: right;
  max-width: 200px;
}

footer {
  text-align: center;
  padding-top: var(--s-2);
  border-top: 1px solid rgba(244, 233, 232, 0.10);
}

.link-subtle {
  color: var(--text-muted);
  text-decoration: none;
  font-size: 12px;
  transition: color 0.2s ease;
}

.link-subtle:hover {
  color: rgba(255, 255, 255, 0.85);
}

.separator {
  font-family: var(--font-mono);
  color: var(--text-muted);
  text-align: center;
  margin-top: var(--s-2);
  margin-bottom: var(--s-1);
  user-select: none;
}

#postActions {
  display: flex;
  flex-direction: column;
  gap: var(--s-2);
}

/* Persistent last prompt (single item) */
.last-prompt {
  padding: var(--s-3);
  border-radius: var(--radius-card);
  border: 1px solid rgba(244, 233, 232, 0.12);
  background: rgba(255, 255, 255, 0.03);
  display: flex;
  flex-direction: column;
  gap: var(--s-2);
}

.last-prompt-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--s-2);
}

.last-prompt-title {
  font-size: 12px;
  font-weight: 700;
  color: rgba(255, 255, 255, 0.88);
}

.last-prompt-text {
  font-family: var(--font-mono);
  font-size: 11px;
  line-height: 1.45;
  color: rgba(255, 255, 255, 0.82);
  white-space: pre-wrap;
  word-break: break-word;

  max-height: 160px;
  overflow: auto;

  padding: var(--s-2);
  border-radius: 12px;
  border: 1px solid var(--border-default);
  background: rgba(0, 0, 0, 0.20);
}

.btn-inline {
  appearance: none;
  border: 1px solid rgba(244, 233, 232, 0.18);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.88);
  border-radius: 12px;
  padding: 8px 10px;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
}

.btn-inline:hover {
  background: rgba(255, 255, 255, 0.07);
  border-color: rgba(244, 233, 232, 0.28);
  transform: translateY(-1px);
}

.btn-inline:active {
  transform: translateY(0);
}

/* Secondary button (so Copy Prompt remains the primary action) */
.btn-secondary {
  width: 100%;
  padding: 12px 14px;
  border-radius: var(--radius-button);
  border: 1px solid rgba(244, 233, 232, 0.18);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.9);
  font-weight: 800;
  font-size: 13px;
  cursor: pointer;
  transition: transform 0.12s ease, background 0.12s ease, border-color 0.12s ease;
}

.btn-secondary:hover {
  background: rgba(255, 255, 255, 0.07);
  border-color: rgba(244, 233, 232, 0.28);
  transform: translateY(-1px);
}

.btn-secondary:active {
  transform: translateY(0);
}

.btn-secondary:disabled {
  opacity: 0.55;
  cursor: not-allowed;
  transform: none;
}

.btn-secondary:disabled:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(244, 233, 232, 0.18);
  transform: none;
}

.status-mini {
  margin-top: var(--s-2);
  padding: var(--s-2);
  border-radius: 12px;
  border: 1px solid rgba(244, 233, 232, 0.14);
  background: rgba(255, 255, 255, 0.03);
  color: rgba(255, 255, 255, 0.82);
  font-size: 12px;
  line-height: 1.35;
  white-space: pre-wrap;
}

